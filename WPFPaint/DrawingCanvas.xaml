<UserControl x:Class="WPFPaint.DrawingCanvas"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800"
             Background="Gray"
             ClipToBounds="True">
    <ScrollViewer x:Name="ScrollViewer" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto"
                  Background="LightGray">
        <Grid x:Name="ZoomGrid" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="10">
            <Grid.LayoutTransform>
                <ScaleTransform x:Name="ZoomTransform" ScaleX="1" ScaleY="1"/>
            </Grid.LayoutTransform>
            <Border BorderBrush="DarkGray" BorderThickness="1">
                <Grid>
                    <Image x:Name="DisplayImage" Stretch="None" 
                           RenderOptions.BitmapScalingMode="NearestNeighbor"
                           RenderOptions.EdgeMode="Aliased"/>
                    <Canvas x:Name="OverlayCanvas" 
                            Background="Transparent"
                            MouseDown="OverlayCanvas_MouseDown"
                            MouseMove="OverlayCanvas_MouseMove"
                            MouseUp="OverlayCanvas_MouseUp"/>
                </Grid>
            </Border>
        </Grid>
    </ScrollViewer>
</UserControl>
